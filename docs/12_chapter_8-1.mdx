---
sidebar_position: 1
---

import Authors from './Authors.tsx';

# 8ì¥ ê¸°ëŠ¥ ì´ë™ ä¸Š

<Authors bookLeader="Mengkki" />

## 8-1 í•¨ìˆ˜ ì˜®ê¸°ê¸° (Move function)

### ë°°ê²½

ì¢‹ì€ ì†Œí”„íŠ¸ì›¨ì–´ ì„¤ê³„ì˜ í•µì‹¬ì€ ëª¨ë“ˆí™”ê°€ ì–¼ë§ˆë‚˜ ì˜ ë˜ì–´ìˆëŠ”ì§€ë¥¼ ëœ»í•˜ëŠ” ëª¨ë“ˆì„±ì´ë‹¤.

> ğŸ™‹â€â™€ï¸Â ëª¨ë“ˆì„±ì´ ë­”ê°€ìš”?
> ğŸ¤”Â í”„ë¡œê·¸ë¨ì˜ ì–´ë”˜ê°€ë¥¼ ìˆ˜ì •í•˜ë ¤ í•  ë•Œ í•´ë‹¹ ê¸°ëŠ¥ê³¼ ê¹Šì´ ê´€ë ¨ëœ ì‘ì€ ì¼ë¶€ë§Œ ì´í•´í•´ë„ ê°€ëŠ¥í•˜ê²Œ í•´ì£¼ëŠ” ëŠ¥ë ¥ì…ë‹ˆë‹¤

ëª¨ë“ˆì„±ì„ ë†’ì´ê¸° ìœ„í•´ì„œëŠ” ì„œë¡œ ì—°ê´€ëœ ìš”ì†Œë“¤ì„ í•¨ê»˜ ë¬¶ê³ , ìš”ì†Œ ì‚¬ì´ì˜ ì—°ê²° ê´€ê³„ë¥¼ ì‰½ê²Œ ì°¾ê³  ì´í•´í•  ìˆ˜ ìˆë„ë¡ í•´ì•¼ í•œë‹¤.

ê·¸ëŸ°ë°, í”„ë¡œê·¸ë¨ì„ ì–¼ë§ˆë‚˜ ì˜ ì´í•´í–ˆëŠëƒì— ë”°ë¼ ì—°ê´€ëœ ìš”ì†Œë“¤ì„ ë¬¶ëŠ” êµ¬ì²´ì ì¸ ë°©ë²•ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆë‹¤. ê·¸ ë†’ì•„ì§„ ì´í•´ë¥¼ ë°˜ì˜í•˜ë ¤ë©´ ìš”ì†Œë“¤ì„ ì´ë¦¬ì €ë¦¬ ì˜®ê²¨ì•¼ í•  ìˆ˜ ìˆë‹¤.

í•¨ìˆ˜ë¥¼ ì˜®ê¸¸ì§€ ë§ì§€ë¥¼ ì •í•˜ê¸°ë€ ì‰½ì§€ ì•Šë‹¤. ê·¸ëŸ´ ë• ê·¸ í•¨ìˆ˜ì˜ í˜„ì¬ ì»¨í…ìŠ¤íŠ¸ì™€ í›„ë³´ ì»¨í…ìŠ¤íŠ¸ë¥¼ ë‘˜ëŸ¬ë³´ë©´ ë„ì›€ì´ ëœë‹¤.

ê·¸ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” í•¨ìˆ˜ë“¤ì€ ë¬´ì—‡ì¸ì§€, ê·¸ í•¨ìˆ˜ê°€ í˜¸ì¶œí•˜ëŠ” í•¨ìˆ˜ë“¤ì„ ë˜ ë¬´ì—‡ì´ ìˆëŠ”ì§€, ê·¸ í•¨ìˆ˜ê°€ ì‚¬ìš©í•˜ëŠ” ë°ì´í„°ëŠ” ë¬´ì—‡ì¸ì§€ ì‚´í´ë³´ë©´

ì„œë¡œ ê´€ë ¨ëœ ì—¬ëŸ¬ í•¨ìˆ˜ë¥¼ ë¬¶ì„ ìƒˆë¡œìš´ ì»¨í…ìŠ¤íŠ¸ê°€ í•„ìš”í•´ì§ˆ ë•Œë„ ë§ì€ë°, ì´ëŸ´ ë•ŒëŠ” ì—¬ëŸ¬ í•¨ìˆ˜ë¥¼ í´ë˜ìŠ¤ë¡œ ë¬¶ê¸°ë‚˜, í´ë˜ìŠ¤ ì¶”ì¶œí•˜ê¸°ë¡œ í•´ê²°í•  ìˆ˜ ìˆë‹¤.

### ì ˆì°¨

1. ì„ íƒí•œ í•¨ìˆ˜ê°€ í˜„ì¬ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì‚¬ìš© ì¤‘ì¸ ëª¨ë“  í”„ë¡œê·¸ë¨ ìš”ì†Œë¥¼ ì‚´í´ë³¸ë‹¤. ì´ ìš”ì†Œë“¤ ì¤‘ì—ë„ í•¨ê»˜ ì˜®ê²¨ì•¼ í•  ê²Œ ìˆëŠ”ì§€ ê³ ë¯¼í•´ë³¸ë‹¤.
   1. í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜ ì¤‘ í•¨ê»˜ ì˜®ê¸¸ ê²Œ ìˆë‹¤ë©´ ëŒ€ì²´ë¡œ ê·¸ í•¨ìˆ˜ë¥¼ ë¨¼ì € ì˜®ê¸°ëŠ”ê²Œ ë‚«ë‹¤. ì–½í˜€ ìˆëŠ” í•¨ìˆ˜ê°€ ì—¬ëŸ¬ ê°œë¼ë©´ ë‹¤ë¥¸ ê³³ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì´ ì ì€ í•¨ìˆ˜ë¶€í„° ì˜®ê¸°ì
   2. í•˜ìœ„ í•¨ìˆ˜ë“¤ì˜ í˜¸ì¶œìê°€ ê³ ìˆ˜ì¤€ í•¨ìˆ˜ í•˜ë‚˜ë¿ì´ë©´ ë¨¼ì € í•˜ìœ„ í•¨ìˆ˜ë“¤ì„ ê³ ìˆ˜ì¤€ í•¨ìˆ˜ì— ì¸ë¼ì¸í•œ ë‹¤ìŒ ê³ ìˆ˜ì¤€ í•¨ìˆ˜ë¥¼ ì˜®ê¸°ê³ , ì˜®ê¸´ ìœ„ì¹˜ì—ì„œ ê°œë³„ í•¨ìˆ˜ë“¤ë¡œ ë‹¤ì‹œ ì¶”ì¶œí•˜ì
2. ì„ íƒí•œ í•¨ìˆ˜ê°€ ë‹¤í˜• ë©”ì„œë“œì¸ì§€ í™•ì¸í•œë‹¤
   1. ê°ì²´ ì§€í–¥ ì–¸ì–´ì—ì„œëŠ” ê°™ì€ ë©”ì„œë“œê°€ ìŠˆí¼í´ë˜ìŠ¤ë‚˜ ì„œë¸Œí´ë˜ìŠ¤ì—ë„ ì„ ì–¸ë˜ì–´ìˆëŠ”ì§€ê¹Œì§€ ê³ ë ¤í•´ì•¼ í•œë‹¤.
3. ì„ íƒí•œ í•¨ìˆ˜ë¥¼ íƒ€ê¹ƒ ì»¨í…ìŠ¤íŠ¸ë¡œ ë³µì‚¬í•œë‹¤ (ì´ë•Œ `ì›ë˜ì˜ í•¨ìˆ˜ë¥¼ ì†ŒìŠ¤ í•¨ìˆ˜ë¼ í•˜ê³  ë³µì‚¬í•´ì„œ ë§Œë“  ìƒˆë¡œìš´ í•¨ìˆ˜ë¥¼ íƒ€ê¹ƒ í•¨ìˆ˜ë¼ í•œë‹¤`). íƒ€ê¹ƒ í•¨ìˆ˜ê°€ ìƒˆë¡œìš´ í„°ì „ì— ì˜ ìë¦¬ ì¡ë„ë¡ ë‹¤ë“¬ëŠ”ë‹¤.
   1. í•¨ìˆ˜ ë³¸ë¬¸ì—ì„œ ì†ŒìŠ¤ ì»¨í…ìŠ¤íŠ¸ì˜ ìš”ì†Œë¥¼ ì‚¬ìš©í•œë‹¤ë©´ í•´ë‹¹ ìš”ì†Œë“¤ì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë„˜ê¸°ê±°ë‚˜ ì†ŒìŠ¤ ì»¨í…ìŠ¤íŠ¸ ìì²´ë¥¼ ì°¸ì¡°ë¡œ ë„˜ê²¨ì¤€ë‹¤
   2. í•¨ìˆ˜ë¥¼ ì˜®ê¸°ê²Œ ë˜ë©´ ìƒˆë¡œìš´ ì»¨í…ìŠ¤íŠ¸ì— ì–´ìš¸ë¦¬ëŠ” ìƒˆë¡œìš´ ì´ë¦„ìœ¼ë¡œ ë°”ê¿”ì¤˜ì•¼ í•  ê²½ìš°ê°€ ë§ë‹¤. í•„ìš”í•˜ë©´ ë°”ê¿”ì¤€ë‹¤
4. ì •ì  ë¶„ì„ì„ ìˆ˜í–‰í•œë‹¤
5. ì†ŒìŠ¤ ì»¨í…ìŠ¤íŠ¸ì—ì„œ íƒ€ê¹ƒ í•¨ìˆ˜ë¥¼ ì°¸ì¡°í•  ë°©ë²•ì„ ì°¾ì•„ ë°˜ì˜í•œë‹¤
6. ì†ŒìŠ¤ í•¨ìˆ˜ë¥¼ íƒ€ê¹ƒ í•¨ìˆ˜ì˜ ìœ„ì„ í•¨ìˆ˜ê°€ ë˜ë„ë¡ ìˆ˜ì •í•œë‹¤
7. í…ŒìŠ¤íŠ¸í•œë‹¤
8. ì†ŒìŠ¤ í•¨ìˆ˜ë¥¼ ì¸ë¼ì¸í• ì§€ ê³ ë¯¼í•´ë³¸ë‹¤
   1. ì†ŒìŠ¤ í•¨ìˆ˜ëŠ” ì–¸ì œê¹Œì§€ë¼ë„ ìœ„ì„ í•¨ìˆ˜ë¡œ ë‚¨ê²¨ë‘˜ ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ì†ŒìŠ¤ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê³³ì—ì„œ íƒ€ê¹ƒí•¨ìˆ˜ë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ëŠ” ë° ë¬´ë¦¬ê°€ ì—†ë‹¤ë©´ ì¤‘ê°„ ë‹¨ê³„(ì†ŒìŠ¤ í•¨ìˆ˜)ëŠ” ì œê±°í•˜ëŠ” í¸ì´ ë‚«ë‹¤.

### ì˜ˆì‹œ: ì¤‘ì²© í•¨ìˆ˜ë¥¼ ìµœìƒìœ„ë¡œ ì˜®ê¸°ê¸°

GPS ì¶”ì  ê¸°ë¡ì˜ ì´ ê±°ë¦¬ë¥¼ ê³„ì‚°í•˜ëŠ” í•¨ìˆ˜

```js
function trackSummary(points){
	const totalTime = calculateTime();
	const totalDistance = calculateDistance();
	const pace = totalTime / 60 / totalDistance;

	return {
		time: totalTime,
		distance: totalDistance,
		pace: pace,
	}

	// ì´ ê±°ë¦¬ ê³„ì‚°
	function calculateDistance() {
		let result = 0;

		for(let i = 1; i < points.length; i++){
			result += distance(points[i-1], points[i]);
		}

		return result;
	}

	function distance(p1, p2) {...} // ë‘ ì§€ì ì˜ ê±°ë¦¬ ê³„ì‚°
	function radians(degrees) {...} // ë¼ë””ì•ˆ ê°’ìœ¼ë¡œ ë³€í™˜
	function calculateTime() {...} // ì´ ì‹œê°„ ê³„ì‚°
}
```

ì—¬ê¸°ì„œ ì¤‘ì²© í•¨ìˆ˜ì¸ `calculateDistance()`ë¥¼ ìµœìƒìœ„ë¡œ ì˜®ê²¨ì„œ ì¶”ì  ê±°ë¦¬ë¥¼ ë‹¤ë¥¸ ì •ë³´ì™€ëŠ” ë…ë¦½ì ìœ¼ë¡œ ê³„ì‚°í•˜ê³  ì‹¶ë‹¤

1. ê°€ì¥ ë¨¼ì € ì´ í•¨ìˆ˜ë¥¼ ìµœìƒìœ„ë¡œ ë³µì‚¬í•´ì•¼ í•œë‹¤

```js
function trackSummary(points){
	const totalTime = calculateTime();
	const totalDistance = calculateDistance();
	const pace = totalTime / 60 / totalDistance;

	return {
		time: totalTime,
		distance: totalDistance,
		pace: pace,
	}

	// ì´ ê±°ë¦¬ ê³„ì‚°
	function calculateDistance() {
		let result = 0;

		for(let i = 1; i < points.length; i++){
			result += distance(points[i-1], points[i]);
		}

		return result;
	}

	function distance(p1, p2) {...} // ë‘ ì§€ì ì˜ ê±°ë¦¬ ê³„ì‚°
	function radians(degrees) {...} // ë¼ë””ì•ˆ ê°’ìœ¼ë¡œ ë³€í™˜
	function calculateTime() {...} // ì´ ì‹œê°„ ê³„ì‚°
}

// ìµœìƒìœ„ë¡œ ë³µì‚¬í•˜ë©´ì„œ ìƒˆë¡œìš´ ì´ë¦„(ì„ì‹œ)ì„ ì§€ì–´ì¤Œ
// highlight-next-line
function top_calculateDistance() {
	let result = 0;

	for(let i = 1; i < points.length; i++){
		result += distance(points[i-1], points[i]);
	}

	return result;
}
```

ì´ë ‡ê²Œ ì´ë¦„ì„ ë‹¤ë¥´ê²Œ í•´ì£¼ë©´ ì†ŒìŠ¤ í•¨ìˆ˜ì™€ íƒ€ê¹ƒ í•¨ìˆ˜ê°€ ì‰½ê²Œ êµ¬ë³„ëœë‹¤

ì´ëŒ€ë¡œëŠ” ì—ëŸ¬ê°€ ë‚¨. ì™œëƒë©´ ì¶”ì¶œí•´ë‚¸ íƒ€ê¹ƒ í•¨ìˆ˜ê°€ ëª¨ë¥´ëŠ” ì‹¬ë²Œ(distanceì™€ points)ë¥¼ ì°¸ì¡°í•˜ê³  ìˆê¸° ë•Œë¬¸

```js
// highlight-next-line
function top_calculateDistance(points) {
  // pointsë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ì¶”ê°€í•¨
  let result = 0;

  for (let i = 1; i < points.length; i++) {
    result += distance(points[i - 1], points[i]);
  }

  return result;
}
```

distance()í•¨ìˆ˜ë„ ë˜‘ê°™ì´ ì²˜ë¦¬í•  ìˆ˜ ìˆì§€ë§Œ calculateDistance()ì™€ í•¨ê»˜ ì˜®ê¸°ëŠ” ê²Œ í•©ë¦¬ì ìœ¼ë¡œ ë³´ì¸ë‹¤. ë‹¤ìŒì€ distance()ì™€ distance()ê°€ ì˜ì¡´í•˜ëŠ” ì½”ë“œë‹¤

```js
// trackSummary í•¨ìˆ˜ ë‚´
function distance(p1, p2){
	// ìˆ˜í•™ ê³µì‹ë“¤...ë¡œì§ë“¤...
	const EARTH_RADIUS = 3959;
  // highlight-next-line
	const dLat = radians(p2.lat) - radians(p1.lat); // radians() ì‚¬ìš©
	...

	return EARTH_RADIUS * c;
}

function radians(degrees) {
	return degrees * Math.PI / 180;
}
```

distance()ëŠ” radians()ë§Œ ì‚¬ìš©í•˜ê³ , radians()ëŠ” í˜„ì¬ ì»¨í…ìŠ¤íŠ¸ì— ìˆëŠ” ì–´ë–¤ ê²ƒë„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.

ë”°ë¼ì„œ ë‘ í•¨ìˆ˜ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë„˜ê¸°ê¸° ë³´ë‹¤ëŠ” í•¨ê»˜ ì˜®ê²¨ë²„ë¦¬ëŠ” ê²Œ ë‚«ë‹¤.

ì–˜ë“¤ì„ calculateDistance()ì•ˆìœ¼ë¡œ ì˜®ê¸°ì

```js
function trackSummary(points){
	const totalTime = calculateTime();
	const totalDistance = calculateDistance();
	const pace = totalTime / 60 / totalDistance;

	return {
		time: totalTime,
		distance: totalDistance,
		pace: pace,
	}

	// ì´ ê±°ë¦¬ ê³„ì‚°
	function calculateDistance() {
		let result = 0;

		for(let i = 1; i < points.length; i++){
			result += distance(points[i-1], points[i]);
		}

		return result;

    // highlight-next-line
		function distance(p1, p2) {...} // ë‘ ì§€ì ì˜ ê±°ë¦¬ ê³„ì‚°
    // highlight-next-line
		function radians(degrees) {...} // ë¼ë””ì•ˆ ê°’ìœ¼ë¡œ ë³€í™˜
	}

	function calculateTime() {...} // ì´ ì‹œê°„ ê³„ì‚°
}
```

ê·¸ë‹¤ìŒ ì •ì  ë¶„ì„ê³¼ í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ ë¬¸ì œê°€ ì—†ëŠ”ì§€ ê²€ì¦í•´ì•¼ í•œë‹¤

ë¬¸ì œê°€ ì—†ìœ¼ë©´ ê°™ì€ ë‚´ìš©ì„ ìƒˆë¡œ ë§Œë“  íƒ€ê¹ƒ í•¨ìˆ˜ë¡œ ë³µì‚¬í•œë‹¤

```js
  // highlight-next-line
	function top_calculateDistance() {
		let result = 0;

		for(let i = 1; i < points.length; i++){
			result += distance(points[i-1], points[i]);
		}

		return result;
    // highlight-next-line
		function distance(p1, p2) {...} // ë‘ ì§€ì ì˜ ê±°ë¦¬ ê³„ì‚°
    // highlight-next-line
		function radians(degrees) {...} // ë¼ë””ì•ˆ ê°’ìœ¼ë¡œ ë³€í™˜
	}
```

ì´ì œ ë°¥ìƒì€ ë‹¤ ì°¨ë ¸ë”°

ì†ŒìŠ¤ í•¨ìˆ˜ì¸ calculateDistance()ì˜ ë³¸ë¬¸ì„ top_calculateDistance()ë¥¼ í˜¸ì¶œí•˜ê²Œ í•˜ì

```js
function trackSummary(points){
	const totalTime = calculateTime();
	const totalDistance = calculateDistance();
	const pace = totalTime / 60 / totalDistance;

	return {
		time: totalTime,
		distance: totalDistance,
		pace: pace,
	}

	function calculateDistance() {
    // highlight-next-line
		return top_calculateDistance(points); // ë¿…
	}

	function calculateTime() {...}
}
```

ì´ ì‹œì ì—ì„œ ë°˜ë“œì‹œ ëª¨ë“  í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ì—¬ ì˜®ê²¨ì§„ í•¨ìˆ˜ê°€ ìƒˆ ë³´ê¸ˆìë¦¬ì— ì˜ ì •ì°©í–ˆëŠ”ì§€ í™•ì¸í•´ì•¼ í•œë‹¤

í…ŒìŠ¤íŠ¸ì— í†µê³¼í•˜ë©´ ì´ì‚¿ì§ì„ ìƒˆ ì§‘ì— í’€ì–´ë†“ëŠ”ë‹¤. (ì¸ë¼ì¸ í•˜ê¸°)

```js
function trackSummary(points){
	const totalTime = calculateTime();
  // highlight-next-line
	const totalDistance = top_calculateDistance(points);
	const pace = totalTime / 60 / totalDistance;

	return {
		time: totalTime,
		distance: totalDistance,
		pace: pace,
	}

	function calculateTime() {...}
}
```

ì´ì œ ìƒˆ í•¨ìˆ˜ì— ì´ë¦„ì„ ì§€ì–´ì¤€ë‹¤. ìµœìƒìœ„ í•¨ìˆ˜ëŠ” ê°€ì‹œì„±ì´ ë†’ìœ¼ë‹ˆ ì í•©í•œ ì´ë¦„ì„ ì‹ ì¤‘íˆ ì§€ì–´ì£¼ëŠ”ê²Œ ì¢‹ë‹¤

```js
function trackSummary(points){
	const totalTime = calculateTime();
  // highlight-next-line
	const pace = totalTime / 60 / totalDistance(points);

	return {
		time: totalTime,
    // highlight-next-line
		distance: totalDistance(points),
		pace: pace,
	}

	function calculateTime() {...}
}
```

trackSummary ë‚´ì—ì„œ totalDistanceë¼ëŠ” ë³€ìˆ˜ë¡œ í™œìš©í•˜ê³  ìˆì—ˆìœ¼ë‹ˆ totalDistance()ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ë³€ê²½í•´ì£¼ê³ , ë³€ìˆ˜ë„ ì¸ë¼ì¸í–ˆë‹¤.

distance()ì™€ radians()í•¨ìˆ˜ë„ totalDistance()ë‚´ì˜ ì–´ë–¤ ê²ƒë„ ì˜ì¡´í•˜ì§€ ì•Šìœ¼ë‹ˆ ì €ìë¼ë©´ ì´ê²ƒì„ ìµœìƒìœ„ë¡œ ì˜®ê¸¸ê±°ë¼ê³  í•˜ì‹œë„¤ìš¥

```js
function trackSummary(points) {}
function totalDistance(points) {}
function distance(p1, p2) {}
function radians(degrees) {}
```

### ì˜ˆì‹œ: ë‹¤ë¥¸ í´ë˜ìŠ¤ë¡œ ì˜®ê¸°ê¸°

ì´ë²ˆì—” í•¨ìˆ˜ ì˜®ê¸°ê¸° ë¦¬íŒ©í„°ë§ì˜ ë‹¤ì±„ë¡œì›€ì„ ë³´ì—¬ì£¼ê¸° ìœ„í•œ ì˜ˆë¥¼ ì¤€ë¹„í–ˆë‹¤

```js
class Account() {
	get bankCharge() { //ì€í–‰ ì´ì ê³„ì‚°
		let result = 4.5;

		if(this._daysOverdrawn > 0) result += this.overdraftCharge;

		return result;
	}

	get overdraftCharge() { // ì´ˆê³¼ ì¸ì¶œ ì´ì ê³„ì‚°
		if(this.type.isPremium){
			const baseCharge = 10;

			if(this.daysOverdrawn <= 7) {
				return baseCharge;
			} else {
				return baseCharge + (this.daysOverdrawn - 7) * 0.85;
			}
		} else {
			return this.daysOverdrawn;
		}
	}
}
```

ê³„ì¢Œ ì¢…ë¥˜ì— ë”°ë¼ ì´ì ì±…ì • ì•Œê³ ë¦¬ì¦˜ì´ ë‹¬ë¼ì§€ë„ë¡ ê³ ì¹ ê±°ë‹¤. ê·¸ëŸ¬ë©´ ë§ˆì´ë„ˆìŠ¤ í†µì¥ì˜ ì´ˆê³¼ ì¸ì¶œ ì´ìë¥¼ ê³„ì‚°í•˜ëŠ” overdraftCharge() ë¥¼ ê³„ì¢Œ ì¢…ë¥˜ í´ë˜ìŠ¤ì¸ AccountTypeìœ¼ë¡œ ì˜®ê¸°ëŠ”ê²Œ ìì—°ìŠ¤ëŸ¬ìš¸ ê²ƒì´ë‹¤

ì²« ë‹¨ê³„ë¡œ overdraftCharge()ë©”ì„œë“œê°€ ì‚¬ìš©í•˜ëŠ” ê¸°ëŠ¥ë“¤ì„ ì‚´í´ë³´ê³ , ê·¸ ëª¨ë‘ë¥¼ í•œêº¼ë²ˆì— ì˜®ê¸¸ë§Œí•œ ê°€ì¹˜ê°€ ìˆëŠ”ì§€ ê³ ë¯¼í•´ë³´ì. ì´ ì˜ˆì—ì„œëŠ” daysOverdrawn() ë©”ì„œë“œëŠ” Account í´ë˜ìŠ¤ì— ë‚¨ê²¨ë‘¬ì•¼ í•œë‹¤. (ê³„ì¢Œ ì¢…ë¥˜ê°€ ì•„ë‹Œ) ê³„ì¢Œë³„ë¡œ ë‹¬ë¼ì§€ëŠ” ë©”ì„œë“œì´ê¸° ë•Œë¬¸ì´ë‹¤.

ë‹¤ìŒìœ¼ë¡œ overdraftCharge()ë©”ì„œë“œ ë³¸ë¬¸ì„ AccountType í´ë˜ìŠ¤ë¡œ ë³µì‚¬í•œ í›„ ìƒˆ ë³´ê¸ˆìë¦¬ì— ë§ê²Œ ì •ë¦¬í•œë‹¤

```js
class AccountType() {
  // highlight-next-line
	overdraftCharge(daysOverDrawn) { // ì´ˆê³¼ ì¸ì¶œ ì´ì ê³„ì‚°
		if(this.type.isPremium){
			const baseCharge = 10;

			if(daysOverdrawn <= 7) {
				return baseCharge;
			} else {
				return baseCharge + (daysOverdrawn - 7) * 0.85;
			}
		} else {
			return daysOverdrawn;
		}
	}
}
```

isPremiumì€ thisì—ì„œ ì°¸ì¡°í•˜ë„ë¡ ëƒ…ë’€ê³ , daysOverDrawnì€ íŒŒë¼ë¯¸í„°ë¡œ ë°›ê²Œ ë³€ê²½í–ˆë‹¤

ë‹¤ìŒìœ¼ë¡œ ì›ë˜ ë©”ì„œë“œì˜ ë³¸ë¬¸ì„ ìˆ˜ì •í•˜ì—¬ ìƒˆ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë„ë¡ í•œë‹¤.

```js
class Account() {
	get bankCharge() { //ì€í–‰ ì´ì ê³„ì‚°
		let result = 4.5;

		if(this._daysOverdrawn > 0) result += this.overdraftCharge;

		return result;
	}

	get overdraftCharge() { // ìœ„ì„ ë©”ì„œë“œ
    // highlight-next-line
		return this.type.overdraftCharge(this.daysOverdrawn);
	}
}
```

ì´ì œ ìœ„ì„ ë©”ì„œë“œì¸ overdraftCharge()ë¥¼ ë‚¨ê²¨ë‘˜ì§€ ì•„ë‹ˆë©´ ì¸ë¼ì¸í• ì§€ ì •í•´ì•¼ í•œë‹¤. ì¸ë¼ì¸ì„ ì„ íƒí•˜ë©´ ë‹¤ìŒì²˜ëŸ¼ ëœë‹¤.

```js
class Account() {
	get bankCharge() { //ì€í–‰ ì´ì ê³„ì‚°
		let result = 4.5;
    // highlight-next-line
		if(this._daysOverdrawn > 0) result += this.type.overdraftCharge(this.daysOverdrawn); // ë¿œ!

		return result;
	}
}
```

## 8-2 í•„ë“œ ì˜®ê¸°ê¸° (Move field)

### ë°°ê²½

í”„ë¡œê·¸ë¨ì˜ ìƒë‹¹ ë¶€ë¶„ì´ ë™ì‘ì„ êµ¬í˜„í•˜ëŠ” ì½”ë“œë¡œ ì´ë¤„ì§€ì§€ë§Œ í”„ë¡œê·¸ë¨ì˜ ì§„ì§œ í˜ì€ ë°ì´í„° êµ¬ì¡°ì—ì„œ ë‚˜ì˜¨ë‹¤.

ì£¼ì–´ì§„ ë¬¸ì œì— ì í•©í•œ ë°ì´í„° êµ¬ì¡°ë¥¼ í™œìš©í•˜ë©´ ë™ì‘ ì½”ë“œëŠ” ìì—°ìŠ¤ëŸ½ê²Œ ë‹¨ìˆœí•˜ê³  ì§ê´€ì ìœ¼ë¡œ ì§œì—¬ì§„ë‹¤.

ë°ì´í„° êµ¬ì¡°ë¥¼ ì˜ëª» ì„ íƒí•˜ë©´ ì•„ê·€ê°€ ë§ì§€ ì•ŠëŠ” ë°ì´í„°ë¥¼ ë‹¤ë£¨ê¸° ìœ„í•œ ì½”ë“œë¡œ ë²”ë²…ì´ ëœë‹¤.

ê·¸ë˜ì„œ ë°ì´í„° êµ¬ì¡°ê°€ ì¤‘ìš”í•˜ë‹¤.

ì˜ˆë¥¼ë“¤ì–´ í•¨ìˆ˜ì— ì–´ë–¤ ë ˆì½”ë“œë¥¼ ë„˜ê¸¸ ë•Œë§ˆë‹¤ ë˜ ë‹¤ë¥¸ ë ˆì½”ë“œì˜ í•„ë“œë„ í•¨ê»˜ ë„˜ê¸°ê³  ìˆë‹¤ë©´ ë°ì´í„° ìœ„ì¹˜ë¥¼ ì˜®ê²¨ì•¼ í•  ê²ƒì´ë‹¤.

ë ˆì½”ë“œë¼ëŠ” ìš©ì–´ë¥¼ ì¼ì§€ë§Œ, í´ë˜ìŠ¤ë‚˜ ê°ì²´ê°€ ì™€ë„ ë˜‘ê°™ë‹¤. í´ë˜ìŠ¤ëŠ” í•¨ìˆ˜ê°€ ê³ë“¤ì—¬ì§„ ë ˆì½”ë“œë¼ í•  ìˆ˜ ìˆìœ¼ë©°, ë‹¤ë¥¸ ë°ì´í„°ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ê±´ê°•í•˜ê²Œ ê´€ë¦¬ë¼ì•¼ í•œë‹¤.

ê·¸ëŸ¬ë‹ˆê¹Œ ì˜ˆì‹œì—ì„œëŠ” í´ë˜ìŠ¤ ì“¸ê±°ë‹¤

### ì ˆì°¨

1. ì†ŒìŠ¤ í•„ë“œê°€ ìº¡ìŠí™”ë˜ì–´ìˆì§€ ì•Šë‹¤ë©´ ìº¡ìŠí™”í•œë‹¤
2. í…ŒìŠ¤íŠ¸í•œë‹¤
3. íƒ€ê¹ƒ ê°ì²´ì— í•„ë“œ(ì™€ ì ‘ê·¼ì ë©”ì„œë“œë“¤)ë¥¼ ìƒì„±í•œë‹¤.
4. ì •ì  ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•œë‹¤
5. ì†ŒìŠ¤ ê°ì²´ì—ì„œ íƒ€ê¹ƒ ê°ì²´ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤
   1. ê¸°ì¡´ í•„ë“œë‚˜ ë©”ì„œë“œ ì¤‘ íƒ€ê¹ƒ ê°ì²´ë¥¼ ë„˜ê²¨ì£¼ëŠ” ê²Œ ìˆì„ì§€ ëª¨ë¥¸ë‹¤. ì—†ë‹¤ë©´ ì´ëŸ° ê¸°ëŠ¥ì˜ ë©”ì„œë“œë¥¼ ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆëŠ”ì§€ ì‚´í´ë³¸ë‹¤. ê°„ë‹¨ì¹˜ ì•Šë‹¤ë©´ íƒ€ê¹ƒ ê°ì²´ë¥¼ ì €ì¥í•  ìƒˆ í•„ë“œë¥¼ ì†ŒìŠ¤ ê°ì²´ì— ìƒì„±í•˜ì. ì´ëŠ” ì˜êµ¬ì ì¸ ë³€ê²½ì´ ë˜ê² ì§€ë§Œ, ë” ë„“ì€ ë§¥ë½ì—ì„œ ë¦¬íŒ©í„°ë§ì„ ì¶©ë¶„íˆ í•˜ê³  ë‚˜ë©´ ë‹¤ì‹œ ì—†ì•¨ ìˆ˜ ìˆì„ ë•Œë„ ìˆë‹¤.
6. ì ‘ê·¼ìë“¤ì´ íƒ€ê¹ƒ í•„ë“œë¥¼ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •í•œë‹¤
   1. ì—¬ëŸ¬ ì†ŒìŠ¤ì—ì„œ ê°™ì€ íƒ€ê¹ƒì„ ê³µìœ í•œë‹¤ë©´, ë¨¼ì € ì„¸í„°ë¥¼ ìˆ˜ì •í•˜ì—¬ íƒ€ê¹ƒ í•„ë“œì™€ ì†ŒìŠ¤ í•„ë“œ ëª¨ë‘ë¥¼ ê°±ì‹ í•˜ê²Œ í•˜ê³ , ì´ì–´ì„œ ì¼ê´€ì„±ì„ ê¹¨íŠ¸ë¦¬ë¥¼ ê°±ì‹ ì„ ê²€ì¶œí•  ìˆ˜ ìˆë„ë¡ ì–´ì„œì…˜ì„ ì¶”ê°€í•˜ì. ëª¨ë“  ê²Œ ì˜ ë§ˆë¬´ë¦¬ë˜ì—ˆë‹¤ë©´ ì ‘ê·¼ìë“¤ì´ íƒ€ê¹ƒ í•„ë“œë¥¼ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •í•œë‹¤.
7. í…ŒìŠ¤íŠ¸í•œë‹¤
8. ì†ŒìŠ¤ í•„ë“œë¥¼ ì œê±°í•œë‹¤
9. í…ŒìŠ¤íŠ¸í•œë‹¤

### ì˜ˆì‹œ

ê³ ê° í´ë˜ìŠ¤ì™€ ê³„ì•½ í´ë˜ìŠ¤ì—ì„œ ì‹œì‘í•˜ì

```js
class Customer {
  constructor(name, discountRate) {
    this._name = name;
    this._discountRate = distcountRate;
    this._contract = new CustomerContract(dateToday());
  }
  // highlight-next-line
  get discountRate() {
    return this._discountRate;
  } // ì´ê±°ë¥¼ CustomerContractë¡œ ì˜®ê¸°ê³  ì‹¶ë‹¤ê³  í•´ë³´ì

  becomePreferred() {
    this._discountRate += 0.03;
  }

  applyDiscount(amount) {
    return amount.subtract(amount.multiply(this._discountRate));
  }
}

class CustomerContract {
  constructor(startDate) {
    this._startDate = startDate;
  }
}
```

ì—¬ê¸°ì„œ discountRateë¥¼ Customerì—ì„œ CustomerContractë¡œ ì˜®ê¸°ê³  ì‹¶ë‹¤

ê°€ì¥ ë¨¼ì € í•  ì¼ì€ ì´ í•„ë“œë¥¼ ìº¡ìŠí™”í•˜ëŠ” ê²ƒì´ë‹¤

```js
class Customer {
  constructor(name, discountRate) {
    this._name = name;
    // highlight-next-line
    this._setDiscountRate(discountRate); // ë¿œ!
    this._contract = new CustomerContract(dateToday());
  }

  get discountRate() {
    return this._discountRate;
  }

  _setDiscountRate(aNumber) {
    // ë¿œ
    // highlight-next-line
    this._discountRate = aNumber;
  }

  becomePreferred() {
    // highlight-next-line
    this._setDiscountRate(this.discountRate + 0.03); // ë¿œ!
  }

  applyDiscount(amount) {
    return amount.subtract(amount.multiply(this.discountRate));
  }
}
```

ì´ì œ CustomerContractí´ë˜ìŠ¤ì— í•„ë“œ í•˜ë‚˜ì™€ ì ‘ê·¼ìë“¤ì„ ì¶”ê°€í•œë‹¤.

```js
class CustomerContract {
  constructor(startDate, discountRate) {
    this._startDate = startDate;
    // highlight-next-line
    this._discountRate = discountRate;
  }

  // highlight-next-line
  get discountRate() {
    return this._discountRate;
  }
  set discountRate(arg) {
    this._discountRate = arg;
  }
}
```

ì´ì œ Customer í´ë˜ìŠ¤ì—ì„œ ì ‘ê·¼ìë“¤ì´ ìƒˆë¡œìš´ í•„ë“œë¥¼ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •í•œë‹¤.

```js
class Customer {
  constructor(name, discountRate) {
    this._name = name;
    this._contract = new CustomerContract(dateToday());
    this._setDiscountRate(discountRate);
  }

  get discountRate() {
    // highlight-next-line
    return this._contract.discountRate;
  } //ìš”ê¸°

  _setDiscountRate(aNumber) {
    // highlight-next-line
    this._contract.discountRate = aNumber; // ìš”ê¸°
  }

  becomePreferred() {
    this._setDiscountRate(this.discountRate + 0.03);
  }

  applyDiscount(amount) {
    return amount.subtract(amount.multiply(this.discountRate));
  }
}
```

<aside>
ğŸ’¡ ì´ ë¦¬íŒ©í„°ë§ì€ ëŒ€ì²´ë¡œ raw ë ˆì½”ë“œì¼ ë•Œ ë³´ë‹¤ ê°ì²´ë¥¼ í™œìš©í•  ë•Œ ë” ìˆ˜ì›”í•˜ë‹¤ (getterì™€ setterë¡œ ê°ì‹¸ì ¸ ìˆëŠ” ê²ƒ)
ì´ëŸ´ ë•ŒëŠ” í•´ë‹¹ ë ˆì½”ë“œì— ì ‘ê·¼ì í•¨ìˆ˜ë“¤ì„ ë§Œë“¤ê³ , raw ë ˆì½”ë“œë¥¼ ì½ê³  ì“°ëŠ” ëª¨ë“  í•¨ìˆ˜ê°€ ì ‘ê·¼ìë¥¼ ê±°ì¹˜ë„ë¡ ê³ ì¹˜ë©´ ëœë‹¤. ê± ìº¡ìŠí™”í•´ì„œ í´ë˜ìŠ¤ë¡œ ë°”ê¾¸ëŠ”ê²ƒë„ ë°©ë²•ì„~

</aside>

### ì˜ˆì‹œ: ê³µìœ  ê°ì²´ë¡œ ì´ë™í•˜ê¸°

ë‹¤ìŒ ì½”ë“œëŠ” ì´ììœ¨ì„ ê³„ì¢Œë³„ë¡œ ì„¤ì •í•˜ê³  ìˆë‹¤.

```js
class Account {
  constructor(number, type, interestRate) {
    this._number = number;
    this._type = type;
    this._interestRate = interestRate;
  }

  get interestRate() {
    return this._interestRate;
  }
}

class AccountType {
  constructor(nameString) {
    this._name = nameString;
  }
}
```

ì´ê±¸ ìˆ˜ì •í•´ì„œ ì´ììœ¨ì´ ê³„ì¢Œ ì¢…ë¥˜ì— ë”°ë¼ ì •í•´ì§€ë„ë¡ í•˜ë ¤ê³  í•œë‹¤

ì´ììœ¨ í•„ë“œëŠ” ì´ë¯¸ ìº¡ìŠí™”ë˜ì–´ ìˆìœ¼ë‹ˆ(`interestRate`) íƒ€ê¹ƒì¸ AccountTypeì— ì´ììœ¨ í•„ë“œì™€ ì ‘ê·¼ì ë©”ì„œë“œë¥¼ ìƒì„±í•´ë³´ì

```js
class AccountType {
  constructor(nameString, interestRate) {
    this._name = nameString;
    // highlight-next-line
    this._interestRate = interestRate;
  }

  // highlight-next-line
  get interestRate() {
    return this._interestRate;
  }
}
```

ê·¸ëŸ°ë° Accountê°€ AccountTypeì˜ ì´ììœ¨ì„ ê°€ì ¸ì˜¤ë„ë¡ ìˆ˜ì •í•˜ë©´ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.

ê¸°ì¡´ì—ëŠ” Accountê°€ ê°ê° ìì‹ ë§Œì˜ ì´ììœ¨ì„ ê°–ê³  ìˆì—ˆëŠ”ë°, AccountTypeì˜ ì´ììœ¨ì„ ê°€ì ¸ì˜¤ë„ë¡ ë°”ë€Œë©´ ì¢…ë¥˜ê°€ ê°™ì€ ëª¨ë“  ê³„ì¢Œê°€ ì´ììœ¨ì„ ê³µìœ í•˜ê²Œ ëœë‹¤.

ê¸°ì¡´ì—ë„ ê·¸ëŸ°ì‹ìœ¼ë¡œ ë¼ìˆì—ˆìŒ ã…‡ã…‹ì§€ë§Œ, ê·¸ë ‡ì§€ ì•Šì€ ê³„ì¢Œê°€ í•˜ë‚˜ë¼ë„ ìˆë‹¤ë©´ ê·¸ê±´ ë¦¬íŒ©í„°ë§ì´ ì•„ë‹ˆë‹¤.

ì´ëŸ´ë• ì–´ì„œì…˜ì„ ì¶”ê°€í•´ë³´ì„¸ì—¬~

```js
class Account {
  constructor(number, type, interestRate) {
    this._number = number;
    this._type = type;
    // highlight-next-line
    assert(interestRate === this._type.interestRate); // ê³„ì¢Œì˜ ì´ììœ¨ì´ ê³„ì¢Œ ì¢…ë¥˜ì˜ ì´ììœ¨ê³¼ ê°™ìŒì„ ë³´ì¥í•¨
    this._interestRate = interestRate;
  }

  get interestRate() {
    return this._interestRate;
  }
}
```

ë§Œì•½ ëª¨ë“  ê³„ì¢Œê°€ AccountTypeë³„ë¡œ ì´ììœ¨ì´ ê°™ë‹¤ëŠ”ê²Œ í™•ì‹¤í•´ì§€ë©´ Accountí´ë˜ìŠ¤ì—ì„œ ì´ììœ¨ì„ ì§ì ‘ ìˆ˜ì •í•˜ë˜ ì½”ë“œë¥¼ ì™„ì „íˆ ì œê±°í•œë‹¤

```js
class Account {
  constructor(number, type) {
    this._number = number;
    this._type = type;
  }

  get interestRate() {
    // highlight-next-line
    return this._type.interestRate;
  }
}
```

## 8-3. ë¬¸ì¥ì„ í•¨ìˆ˜ë¡œ ì˜®ê¸°ê¸°(Move statements into function)

### ë°°ê²½

ìš°ë¦¬ ì„ ìƒë‹˜ì€ íŠ¹ì • í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ì½”ë“œê°€ ë‚˜ì˜¬ ë•Œ ë§ˆë‹¤ ê·¸ ì•ì´ë‚˜ ë’¤ì— ë˜‘ê°™ì€ ì½”ë“œê°€ ì‹¤í–‰ë˜ëŠ” ëª¨ìŠµì„ ë³´ë©´, ê·¸ ë°˜ë³µë˜ëŠ” ë¶€ë¶„ì„ í”¼í˜¸ì¶œ í•¨ìˆ˜ë¡œ í•©ì¹˜ëŠ” ë°©ë²•ì„ ê¶ë¦¬í•œë‹¤.

ê·¸ë ‡ê²Œ í•´ ë‘ë©´ ì¶”í›„ ë°˜ë³µë˜ëŠ” ë¶€ë¶„ì—ì„œ ìˆ˜ì •í•  ê²ƒì´ ìƒê²¼ì„ ë•Œ ë‹¨ í•œ ê³³ë§Œ ìˆ˜ì •í•˜ë©´ ëœë‹¤.

### ì ˆì°¨

1. ë°˜ë³µ ì½”ë“œê°€ í•¨ìˆ˜ í˜¸ì¶œ ë¶€ë¶„ê³¼ ë©€ë¦¬ ë–¨ì–´ì ¸ ìˆë‹¤ë©´ ë¬¸ì¥ ìŠ¬ë¼ì´ë“œí•˜ê¸°ë¥¼ ì ìš©í•´ ê·¼ì²˜ë¡œ ì˜®ê¸´ë‹¤
2. íƒ€ê¹ƒ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê³³ì´ í•œ ê³³ë¿ì´ë¼ë©´, ë‹¨ìˆœíˆ ì†ŒìŠ¤ ìœ„ì¹˜ì—ì„œ í•´ë‹¹ ì½”ë“œë¥¼ ì˜ë¼ë‚´ì–´ í”¼í˜¸ì¶œ í•¨ìˆ˜ë¡œ ë³µì‚¬í•˜ë„ í…ŒìŠ¤íŠ¸í•œë‹¤. ì´ ê²½ìš°ë¼ë©´ ë‚˜ë¨¸ì§€ ë‹¨ê³„ëŠ” ë¬´ì‹œí•œë‹¤.
3. í˜¸ì¶œìê°€ ë‘˜ ì´ìƒì´ë©´ í˜¸ì¶œì ì¤‘ í•˜ë‚˜ì—ì„œ íƒ€ê¹ƒ í•¨ìˆ˜ í˜¸ì¶œ ë¶€ë¶„ê³¼ ê·¸ í•¨ìˆ˜ë¡œ ì˜®ê¸°ë ¤ëŠ” ë¬¸ì¥ë“¤ì„ í•¨ê»˜ ë‹¤ë¥¸ í•¨ìˆ˜ë¡œ ì¶”ì¶œí•œë‹¤. ì¶”ì¶œí•œ í•¨ìˆ˜ì— ê¸°ì–µí•˜ê¸° ì‰¬ìš´ ì„ì‹œ ì´ë¦„ì„ ì§€ì–´ì¤€ë‹¤.
4. ëª¨ë“  í˜¸ì¶œìê°€ ìƒˆë¡œìš´ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ì›ë˜ í•¨ìˆ˜ë¥¼ ìƒˆë¡œìš´ í•¨ìˆ˜ ì•ˆìœ¼ë¡œ ì¸ë¼ì¸ í•œ í›„ ì›ë˜ í•¨ìˆ˜ë¥¼ ì œê±°í•œë‹¤
5. ìƒˆë¡œìš´ í•¨ìˆ˜ì˜ ì´ë¦„ì„ ì›ë˜ í•¨ìˆ˜ì˜ ì´ë¦„ìœ¼ë¡œ ë°”ê¿”ì¤€ë‹¤ (ë” ë‚˜ì€ ì´ë¦„ì´ ìˆë‹¤ë©´ ê·¸ê±¸ë¡œ í•˜ì)

### ì˜ˆì‹œ

ì‚¬ì§„ ê´€ë ¨ ë°ì´í„°ë¥¼ HTMLë¡œ ë‚´ë³´ë‚´ëŠ” ì½”ë“œ

```js
function renderPerson(outStream, person){
	const result = [];
	...ì–´ì©Œêµ¬ì €ì©Œêµ¬
  // highlight-next-line
	result.push(`<p>ì œëª©: ${person.photo.title}</p>`);
  // highlight-next-line
	result.push(emitPhotoData(person.photo);
	...

	return result.join('\n');
}

function photoDiv(p){
	return [
		'div',
    // highlight-next-line
		`<p>ì œëª©: ${p.title}</p>`,
    // highlight-next-line
		emitPhotoData(p),
		...
	].join('\n');
}

function emitPhotoData(aPhoto){
	const result = [];

	result.push(`<p>....</p>`);
	result.push(`<p>....</p>`);

	return result.join(`\n`);
}
```

ë‘êµ°ë°ì—ì„œ emitPhotoDataë¥¼ í˜¸ì¶œí•˜ê³ , ë‘ ê³³ ë°”ë¡œ ì•ì—ëŠ” ì œëª©ì„ ì¶œë ¥í•˜ëŠ” ì½”ë“œê°€ ë‚˜ì˜¨ë‹¤. ì œëª© ì¶œë ¥í•˜ëŠ” ë¶€ë¶„ì„ emitPhotoData ì•ˆìœ¼ë¡œ ì˜®ê²¨ë³´ì.

í˜¸ì¶œì ìˆ˜ê°€ í•˜ë‚˜ì˜€ë‹¤ë©´ ë‹¨ìˆœíˆ ë³µë¶™í•˜ë©´ ë˜ì§€ë§Œ í˜¸ì¶œì ìˆ˜ê°€ ëŠ˜ì–´ë‚ ìˆ˜ë¡ ì•ˆì „í•œ ê¸¸ì„ íƒí•´ì•¼ í•œë‹¤

ë¨¼ì € í•¨ìˆ˜ë¥¼ ì¶”ì¶œí•´ ë³´ì

```js
function zznew(p) {
  //ì´ë¦„ ì§„ì§œ ì„±ì˜ì—†ë‹¤...
  return [`<p>ì œëª©: ${p.title}</p>`, emitPhotoData(p)].join(`\n`);
}
```

ê·¸ë¦¬ê³  ë‹¤ë¥¸ í˜¸ì¶œìë“¤ì„ ìƒˆë¡œìš´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë„ë¡ ìˆ˜ì •í•œë‹¤

```js
function renderPerson(outStream, person){
	const result = [];
	...ì–´ì©Œêµ¬ì €ì©Œêµ¬
  // highlight-next-line
	result.push(zznew(person.photo)); // ë¿œ
	...

	return result.join('\n');
}

function photoDiv(p){
	return [
		'div',
    // highlight-next-line
		zznew(p), // ë¿œ
		...
	].join('\n');
}
```

í˜¸ì¶œìë“¤ì„ ë¹ ì§ì—†ì´ ìˆ˜ì •í–ˆë‹¤ë©´ emitPhotoDataë¥¼ ì¸ë¼ì¸ í•œë‹¤

```js
function zznew(p) {
  return [`<p>ì œëª©: ${p.title}</p>`, `<p>....</p>`, `<p>....</p>`].join(`\n`);
}
```

ê·¸ë¦¬ê³  í•¨ìˆ˜ ì´ë¦„ì„ ë°”ê¿”ì¤€ë‹¤

```js
function renderPerson(outStream, person){
	const result = [];
	...ì–´ì©Œêµ¬ì €ì©Œêµ¬
	result.push(emitPhotoData(person.photo)); // ë¿œ
	...

	return result.join('\n');
}

function photoDiv(p){
	return [
		'div',
		emitPhotoData(p), // ë¿œ
		...
	].join('\n');
}

function emitPhotoData(aPhoto) { // ë¿œ
	return [
		`<p>ì œëª©: ${p.title}</p>`,
		`<p>....</p>`,
		`<p>....</p>`
	].join(`\n`);
}
```

## 8-4. ë¬¸ì¥ì„ í˜¸ì¶œí•œ ê³³ìœ¼ë¡œ ì˜®ê¸°ê¸°(Move statements to callers)

### ë°°ê²½

í•¨ìˆ˜ëŠ” ì¶”ìƒí™”ì˜ ê¸°ë³¸ ë¹Œë”© ë¸”ë¡ì´ë‹¤. ê·¸ëŸ°ë° ì¶”ìƒí™”ë¼ëŠ” ê²ƒì´ ê·¸ ê²½ê³„ë¥¼ í•­ìƒ ì˜¬ë°”ë¥´ê²Œ ê¸‹ê¸°ëŠ” ì‰½ì§€ê°€ ì•Šêµ¬ìš”...

ì½”ë“œì˜ ê¸°ëŠ¥ì´ ë‹¬ë¼ì§€ê²Œ ë˜ë©´ ì¶”ìƒí™”ì˜ ê²½ê³„ë„ ì›€ì§ì´ê²Œ ë˜ê³ ...í•¨ìˆ˜ì— ë­ ì¶”ê°€ë˜ê³ ...

ê·¸ëŸ¬ë‹¤ë³´ë©´ ì´ˆê¸°ì—ëŠ” ì‘ì§‘ë„ ë†’ê³  í•œê°€ì§€ ì¼ë§Œ í•˜ë˜ í•¨ìˆ˜ê°€ ì–´ëŠìƒˆ ë‘˜ ì´ìƒì˜ ì¼ì„ í•˜ê³  ìˆê²Œ ë˜ëŠ”ê²ƒ!!

### ì ˆì°¨

1. í˜¸ì¶œìê°€ í•œë‘ê°œ ë¿ì´ê³  í”¼í˜¸ì¶œ í•¨ìˆ˜ë„ ê°„ë‹¨í•œ ë‹¨ìˆœí•œ ìƒí™©ì´ë©´, í”¼í˜¸ì¶œ í•¨ìˆ˜ì˜ ì²˜ìŒ(ì•„ë‹˜ ë§ˆì§€ë§‰)ì¤„ë“¤ì„ ì˜ë¼ë‚´ì„œ í˜¸ì¶œìë¡œ ë³µë¶™í•œë‹¤.(í•„ìš”í•˜ë©´ ì ë‹¹íˆ ìˆ˜ì •). í…ŒìŠ¤íŠ¸ë§Œ í†µê³¼í•˜ë©´ ì—¬ê¸°ì„œ ë~
2. ë³µì¡í•œ ìƒí™©ì—ì„œëŠ” ì´ë™í•˜ì§€ ì•Šê¸¸ ì›í•˜ëŠ” ëª¨ë“  ë¬¸ì¥ì„ í•¨ìˆ˜ë¡œ ì¶”ì¶œí•œë‹¤ìŒ ê²€ìƒ‰í•˜ê¸° ì‰¬ìš´ ì´ë¦„ì„ ë¶™ì—¬ì¤€ë‹¤
   1. ëŒ€ìƒ í•¨ìˆ˜ê°€ ì„œë¸Œí´ë˜ìŠ¤ì—ì„œ ì˜¤ë²„ë¼ì´ë“œëë‹¤ë©´ ì˜¤ë²„ë¼ì´ë“œí•œ ì„œë¸Œí´ë˜ìŠ¤ë“¤ì˜ ë©”ì„œë“œ ëª¨ë‘ì—ì„œ ë™ì¼í•˜ê²Œ ë‚¨ê¸¸ ë¶€ë¶„ì„ ë©”ì„œë“œë¡œ ì¶”ì¶œí•œë‹¤. ì´ë•Œ ë‚¨ê²¨ì§ˆ ë©”ì„œë“œì˜ ë³¸ë¬¸ì€ ëª¨ë“  í´ë˜ìŠ¤ì—ì„œ ë˜‘ê°™ì•„ì•¼ í•œë‹¤. ê·¸ëŸ° ë‹¤ìŒ ìŠˆí¼í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë§Œ ë‚¨ê¸°ê³  ì„œë¸Œí´ë˜ìŠ¤ë“¤ì˜ ë©”ì„œë“œë¥¼ ì œê±°í•œë‹¤.
3. ì›ë˜ í•¨ìˆ˜ë¥¼ ì¸ë¼ì¸í•œë‹¤
4. ì¶”ì¶œëœ í•¨ìˆ˜ì˜ ì´ë¦„ì„ ì›ë˜ í•¨ìˆ˜ì˜ ì´ë¦„ìœ¼ë¡œ ë³€ê²½í•œë‹¤

### ì˜ˆì‹œ

```js
function renderPerson(outStream, person) {
  outStream.write(`<p>${person.name}</p>\n`);
  renderPhoto(outStream, person.photo);
  emitPhotoData(outStream, person.photo);
}

function listRecentPhotos(outStream, photo) {
  photos
    .filter(() => {})
    .forEach(p => {
      outStream.write('<div>\n');
      emitPhotoData(outStream, p);
      outStream.write('</div>\n');
    });
}

function emitPhotoData(outStream, photo) {
  outStream.write(`<p>ì œëª© ${photo.title}</p>`);
  outStream.write(`<p>ë‚ ì§œ ${photo.date.toDateString()}</p>`);
  outStream.write(`<p>ìœ„ì¹˜ ${photo.location}</p>`);
}
```

ì—¬ê¸°ì„œ renderPersonì€ ê·¸ëŒ€ë¡œ ë‘” ì±„ listRecentPhotos()ê°€ location ì •ë³´ë¥¼ ë‹¤ë¥´ê²Œ ë Œë”ë§í•˜ë„ë¡ ë³€ê²½í•´ì•¼ í•œë‹¤

ë¨¼ì € emitPhotoDataì— ë‚¨ê¸¸ ì½”ë“œë¥¼ í•¨ìˆ˜ë¡œ ì¶”ì¶œí•œë‹¤

```js
function emitPhotoData(outStream, photo) {
  zztmp(outStream, photo);
  outStream.write(`<p>ìœ„ì¹˜ ${photo.location}</p>`);
}

function zztmp(outStream, photo) {
  // ì´ë™í•˜ì§€ ì•Šì„ ì½”ë“œ
  outStream.write(`<p>ì œëª© ${photo.title}</p>`);
  outStream.write(`<p>ë‚ ì§œ ${photo.date.toDateString()}</p>`);
}
```

ì˜ ë™ì‘í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•´ì„œ í™•ì¸í•´ë³¸ í›„ í”¼í˜¸ì¶œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œìë“¤ë¡œ í•œ ë²ˆì— í•˜ë‚˜ì”© ì¸ë¼ì¸ í•œë‹¤. renderPersonë¶€í„° ì‹œì‘!

```js
function renderPerson(outStream, person) {
  outStream.write(`<p>${person.name}</p>\n`);
  renderPhoto(outStream, person.photo);
  // highlight-next-line
  zztmp(outStream, person.photo); // ì•„ê¹Œ ì¶”ì¶œí•œ í•¨ìˆ˜
  // highlight-next-line
  outStream.write(`<p>ìœ„ì¹˜ ${person.photo.location}</p>`);
}
```

ì´í›„ì—ë„ í…ŒìŠ¤íŠ¸ í•¨ ëŒë ¤ë³´ê³  ë‚˜ë¨¸ì§€ listRecentPhotosìª½ì—ë„ ì¸ë¼ì¸í•œë‹¤

```js
function listRecentPhotos(outStream, photo) {
  photos
    .filter(() => {})
    .forEach(p => {
      outStream.write('<div>\n');
      // highlight-next-line
      zztmp(outStream, photo);
      // highlight-next-line
      outStream.write(`<p>ìœ„ì¹˜ ${photo.location}</p>`);
      outStream.write('</div>\n');
    });
}
```

ì´ì œ ì¸ë¼ì¸í•œ í•¨ìˆ˜ë¥¼ ì§€ì›Œì¤€ë‹¤

```js
function renderPerson(outStream, person) {
  outStream.write(`<p>${person.name}</p>\n`);
  renderPhoto(outStream, person.photo);
  zztmp(outStream, photo);
  outStream.write(`<p>ìœ„ì¹˜ ${photo.location}</p>`);
}

function listRecentPhotos(outStream, photo) {
  photos
    .filter(() => {})
    .forEach(p => {
      outStream.write('<div>\n');
      zztmp(outStream, photo);
      outStream.write(`<p>ìœ„ì¹˜ ${photo.location}</p>`);
      outStream.write('</div>\n');
    });
}

/*
function emitPhotoData(outStream, photo){
	zztmp(outStream, photo);
  outStream.write(`<p>ìœ„ì¹˜ ${photo.location}</p>`);
}*/

function zztmp(outStream, photo) {
  // ì´ë™í•˜ì§€ ì•Šì„ ì½”ë“œ ë‚¨ì•„ìˆìŒ!
  outStream.write(`<p>ì œëª© ${photo.title}</p>`);
  outStream.write(`<p>ë‚ ì§œ ${photo.date.toDateString()}</p>`);
}
```

ì´ì œ zztmpì˜ ì´ë¦„ì„ ì›ë˜ í•¨ìˆ˜ì´ë¦„ìœ¼ë¡œ ë˜ëŒë¦¬ë©´ ë!

```js
function emitPhotoData(outStream, photo) {
  outStream.write(`<p>ì œëª© ${photo.title}</p>`);
  outStream.write(`<p>ë‚ ì§œ ${photo.date.toDateString()}</p>`);
}
```
